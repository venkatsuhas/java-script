(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{89:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){"use strict";c.r(t);var n=c(0),o=c.n(n),a=c(20),r=c.n(a),s=c(10),i=c.n(s),l=c(17),j=c(6),u=c(12),b=c(8),d=c(25),h=c(26),O=c(55),p=c(54),x=c(94),f=c(1),g=function(e){Object(O.a)(c,e);var t=Object(p.a)(c);function c(){return Object(d.a)(this,c),t.apply(this,arguments)}return Object(h.a)(c,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(x.a.Item,{children:Object(f.jsx)("div",{className:"carousel-div",children:Object(f.jsx)("img",{className:"d-block w-100 carousel-img",src:"https://quotefancy.com/media/wallpaper/3840x2160/4119-Thomas-Jefferson-Quote-I-cannot-live-without-books.jpg",alt:"First slide"})})}),Object(f.jsx)(x.a.Item,{children:Object(f.jsx)("div",{className:"carousel-div",children:Object(f.jsx)("img",{className:"d-block w-100 carousel-img",src:"https://quotefancy.com/media/wallpaper/3840x2160/20732-Suzy-Kassem-Quote-Doubt-kills-more-dreams-than-failure-ever-will.jpg",alt:"Second slide"})})}),Object(f.jsx)(x.a.Item,{children:Object(f.jsx)("div",{className:"carousel-div",children:Object(f.jsx)("img",{className:"d-block w-100 carousel-img",src:"https://quotefancy.com/media/wallpaper/3840x2160/1896675-Dante-Alighieri-Quote-Follow-your-own-star.jpg",alt:"Third slide"})})})]})})}}]),c}(o.a.Component),m=c(28),k=c(37),v=function(e){var t=Object(n.useState)(0),c=Object(j.a)(t,2),o=c[0],a=c[1];Object(n.useEffect)((function(){a((function(t){return t+10*e.value-10*Math.floor(e.value)}))}),[e.value]);return Object(f.jsx)("div",{children:Object(f.jsxs)("h3",{children:["Rating:",Object(m.a)(Array(5)).map((function(t,c){return c<Math.floor(e.value)?Object(f.jsx)(k.a,{color:"gold",title:"".concat(e.value)}):null})),o>=5?Object(f.jsx)(k.b,{color:"gold",title:"".concat(e.value)}):null]})})},y=c(11),B=function(e,t){switch(t.type){case"List":return console.log("toogleBookList"),Object(y.a)(Object(y.a)({},e),{},{toggle:!1,books:t.BookList});case"ADDBOOK":return Object(y.a)(Object(y.a)({},e),{},{books:[].concat(Object(m.a)(e.books),[t.addBook])});case"SelectedBook":return Object(y.a)(Object(y.a)({},e),{},{selectedBook:t.selectedBook});case"SearchById":return console.log(t.searchBookById),Object(y.a)(Object(y.a)({},e),{},{searchedBook:t.searchBookById});case"SearchByAuthor":return console.log(t.searchBookByAuthor),Object(y.a)(Object(y.a)({},e),{},{searchedBook:t.searchBookByAuthor});case"SearchByTitle":return console.log(t.searchBookByTitle),Object(y.a)(Object(y.a)({},e),{},{toggle:!0,searchedBook:t.searchBookByTitle});case"SearchByRating":return console.log(t.searchBookByRating),Object(y.a)(Object(y.a)({},e),{},{searchedBook:t.searchBookByRating});case"SearchByPrice":return console.log(t.searchBookByPrice),Object(y.a)(Object(y.a)({},e),{},{searchedBook:t.searchBookByPrice});case"DELETE":return e.books.filter((function(e){return e._id!==t.deleteBook}));default:return e}},S={books:[],searchedBook:[],selectedBook:"",toggle:!1,otp:!1,open:!1},w=o.a.createContext({}),C=function(e){var t=Object(n.useReducer)(B,S,(function(){return S})),c=Object(j.a)(t,2),o=c[0],a=c[1];return Object(f.jsx)(w.Provider,{value:{books:o,dispatch:a},children:e.children})},N=w,I=c(18),A=c.n(I),P=function(){function e(){Object(d.a)(this,e),this.getAllBooks=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("http://localhost:8000/books").then((function(e){console.log(e.data),t({type:"List",BookList:e.data})})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addingBooks=function(){var e=Object(l.a)(i.a.mark((function e(t,c,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("http://localhost:8000/books",c,{headers:{"Content-Type":"application/json",Authorization:n}});case 2:200===e.sent.status&&t({type:"ADDBOOK",addBook:c});case 4:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),this.bookDelete=function(){var e=Object(l.a)(i.a.mark((function e(t,c){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="Bearer "+localStorage.getItem("login"),e.next=3,A.a.delete("http://localhost:8000/books/"+c,{headers:{"Content-Type":"application/json",Authorization:n}});case 3:200===e.sent.status&&t({type:"DELETE",deleteBook:c});case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),this.bookDetails=function(){var e=Object(l.a)(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("http://localhost:8000/books/"+t);case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(h.a)(e,[{key:"handleSearchSubmit",value:function(e,t,c){"author"===t?A.a.get("http://localhost:8000/books/by/"+e).then((function(e){c({type:"SearchByAuthor",searchBookByAuthor:e.data})})).catch((function(e){console.log(e.message)})):"id"===t?A.a.get("http://localhost:8000/books/"+e).then((function(e){c({type:"SearchById",searchBookById:e.data})})).catch((function(e){console.log(e.message)})):"title"===t?A.a.get("http://localhost:8000/books/by/title/"+e).then((function(e){c({type:"SearchByTitle",searchBookByTitle:e.data})})).catch((function(e){console.log(e.message)})):"rating"===t?A.a.get("http://localhost:8000/books/by/rating/"+e).then((function(e){c({type:"SearchByRating",searchBookByRating:e.data})})).catch((function(e){console.log(e.message)})):"price"===t&&A.a.get("http://localhost:8000/books/priced/0/"+e).then((function(e){c({type:"SearchByPrice",searchBookByPrice:e.data})})).catch((function(e){console.log(e.message)}))}}]),e}();var D=function(e){var t=Object(n.useContext)(N),c=Object(n.useState)({}),o=Object(j.a)(c,2),a=o[0],r=o[1],s=Object(b.e)(),i=Object(b.f)().id,l=new P;return Object(n.useEffect)((function(){l.bookDetails(i).then((function(e){r(e.data)}))})),Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("img",{style:{width:"200px"},id:"imgDetails",src:a.cover,alt:a.title}),Object(f.jsx)("p",{children:Object(f.jsxs)("strong",{children:["Author:",a.author]})}),Object(f.jsx)(v,{value:a.rating}),Object(f.jsx)("p",{children:Object(f.jsxs)("strong",{children:["Price :\u20b9",a.price]})}),Object(f.jsx)("h2",{children:a.title}),Object(f.jsx)("p",{children:Object(f.jsx)("strong",{children:a.description})}),localStorage.getItem("token")?Object(f.jsx)("button",{id:"del-button",onClick:function(){l.bookDelete(t.dispatch,t.books.selectedBook._id),s.push("/books")},children:"Delete"}):null]})})},E=function(e){var t=Object(n.useState)(""),c=Object(j.a)(t,2),o=c[0],a=c[1],r=Object(n.useState)(""),s=Object(j.a)(r,2),i=s[0],l=s[1],u=Object(n.useContext)(N),b=new P;return Object(f.jsxs)("div",{className:"searchDiv",children:[Object(f.jsxs)("select",{className:"select",onChange:function(e){l(e.target.value)},children:[Object(f.jsx)("option",{value:"text",children:"Select"}),Object(f.jsx)("option",{value:"id",children:"Id"}),Object(f.jsx)("option",{value:"author",children:"Author"}),Object(f.jsx)("option",{value:"title",children:"Title"}),Object(f.jsx)("option",{value:"rating",children:"Rating"}),Object(f.jsx)("option",{value:"price",children:"price"}),Object(f.jsx)("option",{value:"text",children:"Text"})]}),Object(f.jsx)("input",{className:"search",type:"text",name:"id",required:!0,placeholder:"Enter here to search",onChange:function(e){a(e.target.value)}}),Object(f.jsx)("button",{id:"search-button",type:"submit",onClick:function(){b.handleSearchSubmit(o,i,u.dispatch)},children:"Search"})]})};var T=function(e){var t=Object(n.useContext)(N);console.log(t,"hello");var c=new P;return Object(n.useEffect)((function(){c.getAllBooks(t.dispatch)}),[t.books.books]),console.log(t.books.toggle,"toggle"),Object(f.jsxs)("div",{children:[Object(f.jsx)(E,{}),t.books.toggle?t.books.searchedBook.map((function(e){return console.log(e),Object(f.jsx)("div",{style:{display:"flex"},children:Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{style:{width:"100px"},id:"img",src:e.cover,alt:e.title}),Object(f.jsx)("h4",{children:e.title}),Object(f.jsx)(v,{value:e.rating}),Object(f.jsx)("p",{className:"price",children:Object(f.jsxs)("strong",{children:["\u20b9",e.price]})})]})})})):t.books.books.map((function(e,c){return Object(f.jsxs)("div",{children:[Object(f.jsx)(u.d,{to:"/details/"+e._id,children:Object(f.jsxs)("div",{onClick:function(){return function(e){t.dispatch({type:"SelectedBook",selectedBook:e})}(e)},className:"book-card",id:e.id,children:[Object(f.jsx)("br",{}),Object(f.jsx)("img",{id:"img",src:e.cover,alt:e.title}),Object(f.jsx)("h3",{children:e.title}),Object(f.jsx)(v,{value:e.rating}),Object(f.jsx)("p",{className:"price",children:Object(f.jsxs)("strong",{children:["\u20b9",e.price]})})]})},e.id),Object(f.jsx)(b.a,{path:"/details/"+e._id,component:D})]})}))]})};function L(e){return Object(f.jsx)("div",{className:"book-form",children:Object(f.jsxs)("form",{className:"form-area",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:e.label}),Object(f.jsx)("input",{type:"text",onChange:function(t){return e.Change(t.target.value)},required:!0})]}),Object(f.jsx)("br",{})]})})}function G(e){var t=Object(n.useContext)(N),c=Object(n.useState)(""),o=Object(j.a)(c,2),a=o[0],r=o[1],s=Object(n.useState)(""),i=Object(j.a)(s,2),l=i[0],u=i[1],d=Object(n.useState)(""),h=Object(j.a)(d,2),O=h[0],p=h[1],x=Object(n.useState)(""),g=Object(j.a)(x,2),m=g[0],k=g[1],v=Object(n.useState)(""),y=Object(j.a)(v,2),B=y[0],S=y[1],w=Object(n.useState)(""),C=Object(j.a)(w,2),I=C[0],A=C[1],D=Object(b.e)(),E=new P;return Object(f.jsx)("div",{className:"book-form",children:Object(f.jsxs)("form",{className:"form-area",children:[Object(f.jsx)("h2",{children:"ADD NEW BOOK"}),Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{children:[Object(f.jsx)(L,{label:"Title:",Change:function(e){return function(e){r(e)}(e)},required:!0}),Object(f.jsx)(L,{label:"Author:",Change:function(e){return function(e){u(e)}(e)},required:!0}),Object(f.jsx)(L,{label:"Price:",Change:function(e){return function(e){p(e)}(e)},required:!0}),Object(f.jsx)(L,{label:"Rating:",Change:function(e){return function(e){k(e)}(e)},required:!0}),Object(f.jsx)(L,{label:"Description:",Change:function(e){return function(e){S(e)}(e)},required:!0}),Object(f.jsx)(L,{label:"Cover:",Change:function(e){return function(e){A(e)}(e)},required:!0})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{id:"add-button",type:"submit",onClick:function(){!function(){var e={title:a,author:l,price:O,rating:m,description:B,cover:I},c="Bearer "+localStorage.getItem("login");E.addingBooks(t.dispatch,e,c)}(),D.push("/books")},children:"ADD"})}),Object(f.jsx)("br",{})]})})}var R=c(95),q=c(53),J=c(93),F=function(e){var t=Object(n.useState)(""),c=Object(j.a)(t,2),o=c[0],a=c[1],r=Object(n.useState)(""),s=Object(j.a)(r,2),i=s[0],l=s[1],d=Object(n.useState)(""),h=Object(j.a)(d,2),O=h[0],p=h[1],x=Object(n.useState)(""),m=Object(j.a)(x,2),k=m[0],v=m[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(R.a,{children:[Object(f.jsxs)(R.a.Group,{as:q.a,controlId:"formGridEmail",children:[Object(f.jsx)(R.a.Label,{children:"User Name"}),Object(f.jsx)(R.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){a(e.target.value)}})]}),Object(f.jsxs)(R.a.Row,{children:[Object(f.jsxs)(R.a.Group,{as:q.a,controlId:"formGridPassword",children:[Object(f.jsx)(R.a.Label,{children:"Password"}),Object(f.jsx)(R.a.Control,{type:"password",placeholder:"Password",onChange:function(e){l(e.target.value)}})]}),Object(f.jsxs)(R.a.Group,{as:q.a,controlId:"formGridPassword",children:[Object(f.jsx)(R.a.Label,{children:"Phone number"}),Object(f.jsx)(R.a.Control,{type:"email",placeholder:"Phone number",onChange:function(e){p(e.target.value)}})]})]}),Object(f.jsxs)(R.a.Group,{as:q.a,controlId:"formGridEmail",children:[Object(f.jsx)(R.a.Label,{children:"Address"}),Object(f.jsx)(R.a.Control,{type:"email",placeholder:"Enter Address",onChange:function(e){v(e.target.value)}})]})]}),Object(f.jsx)(J.a,{className:"style",variant:"success",type:"button",onClick:function(){return e.handleregistration({username:o,password:i,phonenumber:O,address:k})},children:Object(f.jsxs)(u.b,{children:[Object(f.jsx)(u.c,{to:"/",children:"Register"}),Object(f.jsx)(b.a,{exact:!0,path:"/",component:g})]})})]})},K=(c(88),function(e){var t=Object(n.useState)(""),c=Object(j.a)(t,2),o=c[0],a=c[1],r=Object(n.useState)(""),s=Object(j.a)(r,2),i=s[0],l=s[1];Object(n.useContext)(N),Object(b.e)();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(R.a,{children:[Object(f.jsxs)(R.a.Group,{as:q.a,controlId:"formGridEmail",children:[Object(f.jsx)(R.a.Label,{children:"User Name "}),Object(f.jsx)(R.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){a(e.target.value)}})]}),Object(f.jsxs)(R.a.Group,{as:q.a,controlId:"formGridPassword",children:[Object(f.jsx)(R.a.Label,{children:"Password"}),Object(f.jsx)(R.a.Control,{type:"password",placeholder:"Password",onChange:function(e){l(e.target.value)}})]})]}),Object(f.jsx)(J.a,{variant:"success",type:"button",onClick:function(){e.handlelogin(o,i)},children:" Login"}),"failed"===e.valid?Object(f.jsx)("div",{style:{color:"red"},children:"Invalid UserName or Password "}):null]})});c(89);function _(e){var t=Object(n.useContext)(N),c=o.a.useState(""),a=Object(j.a)(c,2),r=a[0],s=a[1],i=function(){t.books.open=!1,t.books.otp=!1};return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{autoFocus:!0,id:"name",onChange:function(e){s(e.target.value)},placeholder:"Enter Otp",type:"text"}),Object(f.jsx)("button",{onClick:i,children:"Cancel"}),Object(f.jsx)("button",{onClick:function(){i(),e.handlesomething(r)},children:"Submit"})]})}var z=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],o=t[1],a=Object(n.useState)(""),r=Object(j.a)(a,2),s=r[0],d=r[1],h=Object(n.useContext)(N);console.log(h),Object(n.useEffect)((function(){localStorage.getItem("token")&&o(!0)}),[]);var O=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(!1),localStorage.clear();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(i.a.mark((function e(t,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/users/login",{method:"POST",body:JSON.stringify({username:t,password:c}),headers:{"Content-Type":"application/json"}});case 2:200===e.sent.status?(console.log("otp"),d("success"),h.books.otp=!0,h.books.open=!0):d("failed");case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(i.a.mark((function e(t){var c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/users/otpverification",{method:"POST",body:JSON.stringify({otp:t}),headers:{"Content-Type":"application/json"}});case 2:return c=e.sent,e.next=5,c.json();case 5:(n=e.sent)&&(localStorage.setItem("token",n),o(!0));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("reg"),e.next=3,fetch("http://localhost:8000/users/registration",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsx)(u.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Book Management System"}),Object(f.jsxs)("ul",{className:"header",children:[Object(f.jsx)("li",{children:Object(f.jsx)(u.c,{to:"/",children:"Home"})}),Object(f.jsx)("li",{children:Object(f.jsx)(u.c,{to:"/books",children:"Book List"})}),Object(f.jsx)("li",{children:c?Object(f.jsx)(u.c,{to:"/addbook",children:"Add Books"}):null}),Object(f.jsx)("li",{children:c?null:Object(f.jsx)(u.c,{to:"/register",children:"Register"})}),Object(f.jsx)("li",{children:c?null:Object(f.jsx)(u.c,{to:"/login",children:"Login"})}),Object(f.jsx)("li",{children:c?Object(f.jsx)(u.c,{to:"/",onClick:function(){return O()},children:"LogOut"}):null})]}),Object(f.jsx)(b.a,{exact:!0,path:"/",component:g}),Object(f.jsx)(b.a,{exact:!0,path:"/books",component:T}),Object(f.jsx)(b.a,{exact:!0,path:"/addbook",component:G}),Object(f.jsx)(b.a,{exact:!0,path:"/details/:id?",component:D}),Object(f.jsx)(b.a,{exact:!0,path:"/register",children:Object(f.jsx)(F,{handleregistration:function(e){m(e)}})}),Object(f.jsx)(b.a,{exact:!0,path:"/login",children:Object(f.jsx)(K,{valid:s,handlelogin:function(e,t){p(e,t)}})}),Object(f.jsx)(b.a,{exact:!0,path:"/otp",component:_}),h.books.otp?Object(f.jsx)("div",{children:Object(f.jsx)(_,{handlesomething:function(e){return x(e)}})}):null]})})})};c(90);r.a.render(Object(f.jsx)("div",{children:Object(f.jsx)(C,{children:Object(f.jsx)(z,{})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.4da0d9c1.chunk.js.map